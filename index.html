<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apunta</title>
    <link rel="stylesheet" href="/assets/style.css" />
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
  </head>
  <body>

<h2>Apunta</h2>

<form action="/addEntry" method="post">
  <div class="wrapper">
    <div class="box">Date</div>
    <div class="box">Category</div>
    <div class="box">Who</div>
    <div class="box">Currency</div>
    <div class="box">Quantity</div>
    <div class="box">Comment</div>

    <div class="box">
      <input type="date" class="input-field" id="entrydate" name="date">
    </div>
    <div class="box">
      <select id="category" name="category">
        {{ range.Categories }}
        <option value="{{.}}">{{.}}</option>
        {{ end }}
      </select>
      <!-- <input type="text" class="input-field" name="category"><br /> -->
    </div>
    <div class="box">
      <select id="who" name="who">
        {{ range.Payers }}
        <option value="{{.}}">{{.}}</option>
        {{ end }}
      </select>
      <!-- <input type="text" class="input-field" name="who"><br /> -->
    </div>
    <div class="box">
      <select id="currency" name="currency">
        {{ range.Currencies }}
        <option value="{{.}}">{{.}}</option>
        {{ end }}
      </select>
      <!-- <input type="text" class="input-field" name="currency"><br /> -->
    </div>
    <div class="box">
      <input type="text" class="input-field" name="quantity"><br />
    </div>
    <div class="box">
      <input type="text" class="input-field" name="comment"><br />
    </div>
    <input type="submit" value="Add entry">
  </div>
</form>

<p class="bottom-one"><hr/></p>

<form action="/addCategory" method="post">
  <input type="text" class="input-field" name="newCategory"><br />
  <input type="submit" value="Add new category label">
</form>

<form action="/addWho" method="post">
  <input type="text" class="input-field" name="newPayer"><br />
  <input type="submit" value="Add new person label">
</form>

<form action="/addCurrency" method="post">
  <input type="text" class="input-field" name="newCurrency"><br />
  <input type="submit" value="Add new currency">
</form>

<p class="bottom-one"><hr/></p>

Input previous debt data (EUR assumed):
<form action="/inputPreviousDebts" method="post">
  Previous debtor name: <input type="text" class="input-field" name="prevDebtName"><br />
  Previous debt amount: <input type="text" class="input-field" name="prevDebtAmount"><br />
  <input type="submit" value="Submit previous debt data">
</form>

Previous year data (EUR):
{{ range $name, $value := .PrevDebt }}
{{ $name }}: {{ $value }}<br />
{{ end }}

<p class="bottom-one"><hr/></p>

<form action="/writeJSON" method="post">
  <input type="submit" value="Write to JSON file">
</form>

<p class="bottom-one"><hr/></p>

<form action="/addSheet" method="post">
  Sheet name: <input type="text" class="input-field" name="sheetName"><br />
  Input month-year: <input type="month" id="monthYearSheet" name="monthYearSheet" min="2022-01" value="2022-01">
  <input type="submit" value="Add a new sheet to the year record">
</form>

<p class="bottom-one"><hr/></p>

<div class="monthWrapper">
  <form action="/changeSheet" method="post">
    <div class="box">
      Change month to:
      <select id="changeSheet" name="changeSheet">
        {{ range.MonthRecs }}
        <option value="{{.GroupName}}">{{.GroupName}}</option>
        {{ end }}
      </select>
    </div>
    <input type="submit" value="Change month">
  </form>

  {{ range .MonthRecs }}
    {{ if .ActiveGroup }}
      Month name: {{.GroupName}}<br>
      {{ range $index, $value := .AvgExchRates }}
      Average Exchange Rate for {{ $value.CurrFrom }}->{{ $value.CurrTo }}: {{ printf "%.3f" $value.AvgVal }}<br>
      {{ end }}
      {{ range $key, $value := .Stats.AllPayersStats }}
        {{ $key }}<br>
        Spent: {{ printf "%.2f" $value.Spent }}<br>
        Accum: {{ printf "%.2f" $value.Accum }}<br>
        Debt: {{ printf "%.2f" $value.Debt }}<br>
      {{ end }}
      <div class="wrapper">
        {{ range .EntryRecords }}
        <div class="box">{{.Date.Format "2006 Jan 02"}}</div>
        <div class="box">{{.Category}}</div>
        <div class="box">{{.PersonName}}</div>
        <div class="box">{{.Currency}}</div>
        <div class="box">{{.Amount}}</div>
        <div class="box">{{.Comment}}</div>
        {{ end }}
      </div>
    {{ end}}
  {{ end }}

</div>

</body>
</html>